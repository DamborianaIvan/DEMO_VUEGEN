define("AccountsModule/userfrmAccountsLandingController",["FormControllerUtility","CommonUtilities","BCCLConstants","Toast","BCCLImages","SegundoFactor"],function(e,t,n,o,s,r){new OrientationHandler;var a=!1,c=kony.mvc.MDAApplication.getSharedInstance().getModuleManager().getModule("BcclInvestmentModule").presentationController,l=kony.mvc.MDAApplication.getSharedInstance().getModuleManager().getModule("AccountsModule").presentationController,d=kony.mvc.MDAApplication.getSharedInstance().getModuleManager().getModule("BcclCardModule").presentationController,u=kony.mvc.MDAApplication.getSharedInstance().getModuleManager().getModule("PayeeModule").presentationController,h=applicationManager.getFormatUtilManager(),C=function(){return kony.i18n.getLocalizedString("i18n.bccl.common.toast.toa11")};return{accountsLength:"",time:10,errorPayee:!1,updateFormUI:function(e){if(e){if(e.showCardLoader&&this.view.CreditCardContainer.isLoading(e.showCardLoader.status),e.campaignRes,e.campaignError,e.accountsSummary&&this.updateAccountList(e.accountsSummary),e.passwordResetWarning&&(this.setPasswordResetNotification(e.passwordResetWarning.show,e.passwordResetWarning.message),this.setHeightBackgroundGrey()),e.buildAccountCard&&(this.accountsLoaded=e.accounts,this.errorMessage=e.message?e.message.errorDescription:this.errorMessage="",this.fillAccountsCard(e.accounts,this.errorMessage)),e.buildAccountCardError&&(this.errorAccounts=e.error,this.showAccountsCardError()),e.buildCardsCard&&(this.cardsLoaded=e.cards,this.cardCardsMessage=e.messages,this.view.CreditCardContainer.lblProductDate.isVisible=!1,e.fechaConsumos&&(this.fechaConsumos=t.formatDateFromBackendString(e.fechaConsumos,"DD/MM"),this.view.CreditCardContainer.lblProductDate.isVisible=!0),this.fillCardsCard(e.cards)),e.buildCardsCardError&&(this.errorCards=e.error,this.view.CreditCardContainer.lblProductDate.isVisible=!1,this.showCardsCardError()),e.showInvestmentsLoader&&this.view.InvestmentsContainer.isLoading(e.showInvestmentsLoader.status),e.buildInvestments&&(this.firstLoadInvestments=!1,e.status?(this.investmentsLoaded=e.investments,e.message&&(this.messageEmptyInvestments=e.message.errorDescription),this.fillInvestments(e.investments)):(this.errorInvestments=e.error,this.messageErrorInvestment=e.error.errorMessage.errorDescription,this.showErrorInvestments())),e.updateFavoriteAccount&&(e.updateFavoriteAccount.success?this.showToastSuccessFavorite(e.message):(this.fillAccountsCard(l.getAccountsCache()),this.showToastErrorFavourite(e.message))),e.showPaymentLoader&&this.view.PaymentsContainer.isLoading(e.showPaymentLoader.status),e.buildPayments)if(this.errorPayee=!1,e.payments.length)this.fillPayments(e.payments);else{try{this.emptyPaymentsMessage=e.message.errorDescription?e.message.errorDescription:kony.i18n.getLocalizedString("i18n.bccl.Payee.messageEmpty")}catch(e){return!1}this.showEmptyPayments()}e.buildPaymentsError&&(this.errorMessagePayments=e.error,this.errorPayee=!0,this.showErrorPayments()),e.secondFactor&&this.showForeignCurrencyPanel(e.secondFactor),e.setLimites&&"frmAccountsLanding"===kony.application.getCurrentForm().id&&this.view.PaymentsContainer.setLimitsData(e),(e.showConfirmedPayments||e.showErrorPaymentService)&&this.view.PanelBillPay.updateFormUI(e),e.showAccountDetailsPanel&&this.showAccountDetailsPanel(e.showAccountDetailsPanel),e.alias&&(this.view.Panel.flxBodyContainer.AccountDetails.setAlias(e),this.view.Panel.forceLayout()),e.showSecondFactorNotification&&e.showSecondFactorNotification.status&&this.showSecondFactorNotification(),e.downloadFile&&this.view.DetallePlazoFijo.showExportLoader(!1),e.refreshMODOWallet&&this.view.ModoAccess.reloadWallet(e.data,e.message,e.error),this.view.forceLayout()}},showForeignCurrencyPanel:function(e){this.view.ForeignCurrency.show({typeOperation:this.typeOperation,accountsPesos:this.accountsPesos,accountsDolar:this.accountsDolar,secondFactor:e})},initActions:function(){this.presenter=kony.mvc.MDAApplication.getSharedInstance().getModuleManager().getModule("AccountsModule")},loadAccountModule:function(){return kony.mvc.MDAApplication.getSharedInstance().getModuleManager().getModule("AccountsModule")},preShowFrmAccountsLanding:function(){this.view.flxNotificationsStack.isVisible=!1,this.view.flxNotificationsStack.removeAll(),t.showModal(!1),this.view.AccountContainer.isLoading(!0),this.view.NoResults.setVisibility(!1),this.view.InvestmentsContainer.flxProductSegment.setVisibility(!1),l.postShowAccountsDashboard(),applicationManager.getModule("BcclCardModule").presentationController.reloadCreditCardDashboard()},postShow:function(){this.createPanels(),applicationManager.getNavigationManager().applyUpdates(this),t.getCurrentDevice()===n.DEVICE_INFO.SCREEN_SIZE.LARGE&&this.view.imgBannerTop.setVisibility(!0),this.setUserLoggedData(),setTimeout(this.postRender.bind(this),0),t.isApp()&&(this.view.flxButtons.bottom="108dp")},postRender:function(){this.view.flxLogout.left="-100%",applicationManager.getLoggerManager().setCustomMetrics(this,!1,"Accounts"),document.getElementById(kony.application.getCurrentForm().id).scrollTo(0,0),this.view.PasswordResetWarning.setType(this.view.PasswordResetWarning.status.WARNING);var e=kony.mvc.MDAApplication.getSharedInstance().getModuleManager().getModule("AuthModule");this.view.PasswordResetWarning.setOnClickButton(e.presentationController.navigateToResetPassword),0===n.BANK_TYPE.BIE&&(this.uncollapseConsolidatedPosition=!0),this.view.customhamburger.activateMenu(n.ACTIVATE_MENU.HOME,""),this.actionAttachments()},createPanels:function(){this.view.ForeignCurrency||this.view.add(new com.gl.compraventa.ForeignCurrency({masterType:0,isVisible:!1,zIndex:1001},{},{})),this.view.DetallePlazoFijo||this.view.add(new com.gl.Investments.DetallePlazoFijo({masterType:0,isVisible:!1,zIndex:9998},{},{})),this.view.PanelBillPay||this.view.add(new com.gl.BillPay.PanelBillPay({masterType:0,isVisible:!1,zIndex:1001},{},{})),this.view.ServicesPay||this.view.add(new com.gl.BillPay.ServicesPay({masterType:0,isVisible:!1,zIndex:1001},{},{}))},actionAttachments:function(){this.view.btnBaja.configure({text:"Botón de Baja",icon:bccl.i18n.FA_BAN(),callback:this.onClickButtonColiving.bind(this,bccl.coliving.modules.BAJA)}),this.view.btnArrepentimiento.configure({text:"Botón de Arrepentimiento",icon:bccl.i18n.FA_UNDO(),callback:this.onClickButtonColiving.bind(this,bccl.coliving.modules.ARRPENTIMIENTO)}),this.view.AccountContainer.SectionError.setOnClickButton(this.onClickReloadAccounts),this.view.InvestmentsContainer.SectionError.setOnClickButton(this.onClickReloadInvestments),this.view.PaymentsContainer.SectionError.setOnClickButton(this.reloadPayments),this.view.CreditCardContainer.SectionError.setOnClickButton(this.onClickReloadCards),this.view.Panel.flxBodyContainer.AccountDetails.ButtonSecondaryWithLoader.onClick(this.getAlias.bind(this))},setHeightBackgroundGrey:function(){if(t.getCurrentDevice()!=n.DEVICE_INFO.SCREEN_SIZE.LARGE){var e=t.getDOMNode(this.view.flxUserDetailsContainer),i=t.getDOMNode(this.view.flxBackgroundGrey);if(e&&i){var o=e.getBoundingClientRect().bottom-i.getBoundingClientRect().bottom;this.view.flxBackgroundGrey.height=parseInt(this.view.flxBackgroundGrey.height)+(o>0?o:0)+40+"dp"}}else this.view.flxBackgroundGrey.height="160dp"},setPasswordResetNotification:function(e,i){var n=this;if(e&&"true"===i.passwordExpiryWarningRequired){n.view.flxPasswordResetWarningContainer.setVisibility(!0);var o=t.getaccessibilityConfig();t.setText(n.view.PasswordResetWarning.rtxNotificationMessage,kony.i18n.getLocalizedString("i18n.bccl.NotificationMessage.rtxNotificationMessage"),o),t.setText(n.view.PasswordResetWarning.btnSeeDetail,kony.i18n.getLocalizedString("i18n.bccl.NotificationMessage.btnClickButton"),o);var s={compId:"PasswordResetWarning",richTextType:n.view.PasswordResetWarning.types.TEXT_AND_BUTTON,text:kony.i18n.getLocalizedString("i18n.bccl.NotificationMessage.rtxNotificationMessage"),buttonText:kony.i18n.getLocalizedString("i18n.bccl.NotificationMessage.btnClickButton")};n.view.PasswordResetWarning.config(s),a=!0,n.view.PasswordResetWarning.flxCloseIcon.onTouchEnd=function(){kony.timer.schedule("mytimerPassword",function(){a=!1,n.view.flxPasswordResetWarningContainer.setVisibility(!1),kony.timer.cancel("mytimerPassword"),n.view.forceLayout()},.1,!1),l.dismissPasswordExpiryMessage()}}else n.view.flxPasswordResetWarningContainer.setVisibility(!1);n.view.forceLayout()},isFavourite:function(e){return e.favouriteStatus&&"1"===e.favouriteStatus},responsiveViews:{},setUserLoggedData:function(){var e=applicationManager.getUserPreferencesManager(),i=kony.sdk.getCurrentInstance().tokens.DbxUserLogin.provider_token.params.user_attributes.lastlogintime,n=e.getUserObj().userfirstname,o=e.getUserObj().userlastname,s=t.formatDateLastSession(i);if(this.view.lblUserName.text=n+" "+o,s){s=new Date(i).format("d/m/Y H:i"),this.view.lblLastSession.text=kony.i18n.getLocalizedString("18n.bccl.WelcomeProfile.LastSession")+" "+s+"hs."}else{var r=h.getTodayDate();this.view.lblLastSession.text=kony.i18n.getLocalizedString("18n.bccl.WelcomeProfile.LastSession")+" "+h.formatDateStringToBars(r)}this.view.forceLayout()},isInit:!0,onBreakpointChange:function(e){if(t.getCurrentChannel()!=n.CHANNEL.APP){if(this.fechaConsumos?(this.view.CreditCardContainer.lblProductDate.text=kony.i18n.getLocalizedString("i18n.bccl.AccountsLanding.consumptionTo")+this.fechaConsumos,this.view.CreditCardContainer.lblProductDate.isVisible=!0):this.view.CreditCardContainer.lblProductDate.isVisible=!1,this.view.flxPasswordResetWarningContainer.isVisible=a,this.firstLoad||this.errorCards||this.fillCardsCard(this.cardsLoaded),this.firstLoadInvestments&&this.fillInvestments(this.investmentsLoaded),this.firstLoadAcc||this.errorAccounts||this.fillAccountsCard(this.accountsLoaded,this.errorMessage),this.errorInvestments&&this.showErrorInvestments(),this.errorPayee)this.showErrorPayments();else{var i=u.getPayeeCache();i.length?this.fillPayments(i):this.showEmptyPayments()}this.errorCards&&this.showCardsCardError(),this.errorAccounts&&this.showAccountsCardError(),this.isInit?this.isInit=!1:this.view.forceLayout(),this.errorInvestments||this.fillInvestments(this.investmentsLoaded),this.setHeightBackgroundGrey(),this.loadBanner()}t.getCurrentDevice()===n.DEVICE_INFO.SCREEN_SIZE.SMALL&&this.setContainersWidth()},accountsLoaded:[],cardsLoaded:[],firstLoadInvestments:!0,investmentsLoaded:[],firstLoad:!0,firstLoadAcc:!0,fillAccountsCard:function(e,i){var o={STAR_SOLID:kony.i18n.getLocalizedString("i18n.bccl.FontAwesome.starSolid"),STAR_EMPTY:kony.i18n.getLocalizedString("i18n.bccl.FontAwesome.starEmpty"),DOTS_SUBMENU:kony.i18n.getLocalizedString("i18n.bccl.FontAwesome.dotsSubMenu")},s=t.getCurrentDevice(),r={common:function(e){var i=t.formatCurrencyWithPoints(e.availableBalance,e.currencyCode);return{lblAccountTitle:e.nickName?e.nickName.length>20?e.nickName.substr(0,20)+"...":e.nickName:"—",lblAccountDetail:e.accountType+" "+n.CURRENCY_CODE[e.currencyCode]+" "+t.formatAccountWithVerifyDigitBccl(e.filialCuenta,e.accountID,e.digitoVerificador),lblAccountAmount:{text:i,skin:e.availableBalance<0?"sknLblAccountAmountDashboardNegative":"sknLblAccountAmountDashboard"},lblSubMenuIcon:o.DOTS_SUBMENU}},mobile:function(e,t){return{template:"flxAccountsDashboardRowMobile",lblAccountTitle:e.nickName?e.nickName.length>15?e.nickName.substr(0,15)+"...":e.nickName:"—",lblAccountFavorite:{text:t?o.STAR_SOLID:"",skin:t?"sknLblStarFavorite":""}}},large:function(e,t){return deviceRelativeWidgets={template:"flxAccountDashboardRow",lblAccountFavorite:{text:t?o.STAR_SOLID:o.STAR_EMPTY,skin:t?"sknLblStarFavorite":"sknLblEmptyStarFavorite"}}},getWidgets:function(e,t){var i="true"==e.favouriteStatus;return Object.assign(this.common(e),this[t](e,i))}};if(0==e.length)this.view.AccountContainer.flxProductSegment.isVisible=!1,this.view.AccountContainer.flxProductRequest.isVisible=!0,0===n.BANK_TYPE.BIE&&this.view.ConsolidatedPosition.hideAccountsAmount(),this.view.AccountContainer.flxOneRowProductRequest.isVisible=!1,this.view.AccountContainer.flxTwoRowProductRequest.isVisible=!1,this.view.NoResults.isVisible=!0,this.view.NoResults.setMessages(kony.i18n.getLocalizedString("i18n.bccl.Accounts.AccountsLanding.AccountsCard.openAccountNow"),kony.i18n.getLocalizedString("i18n.bccl.Accounts.AccountsLanding.AccountsCard.RequestMessage3")),this.view.AccountContainer.NoResults.setMessages(i),this.view.AccountContainer.NoResults.isVisible=!0,this.view.AccountContainer.NoResults.configure({imageSize:"medium"});else{var a=e.slice(0,3),c=this,l=(s=t.getCurrentDevice())===n.DEVICE_INFO.SCREEN_SIZE.SMALL||s===n.DEVICE_INFO.SCREEN_SIZE.MEDIUM?"mobile":n.DEVICE_INFO.SCREEN_SIZE.LARGE;if(e.length>=2){var d=e.reduce(function(e,t){return t.currencyCode==n.CURRENCY.ARS?(e.existAccountPesos=!0,e.totalPesos+=parseFloat(t.availableBalance)):t.currencyCode==n.CURRENCY.USD&&(e.existAccountDolares=!0,e.totalDolares+=parseFloat(t.availableBalance)),e},{totalPesos:0,existAccountPesos:!1,totalDolares:0,existAccountDolares:!1});0===n.BANK_TYPE.BIE&&(this.view.ConsolidatedPosition.setAccountsAmount(d.totalPesos,d.totalDolares,d.existAccountPesos,d.existAccountDolares),this.view.ConsolidatedPosition.showAccountsAmount())}else 0===n.BANK_TYPE.BIE&&this.view.ConsolidatedPosition.hideAccountsAmount();var u=a.map(function(e){var t=r.getWidgets(e,l);return l==n.DEVICE_INFO.SCREEN_SIZE.LARGE&&(t.onFavoriteClick=c.clickFavoriteAccount),t.onClickAccount=c.onClickAccount,t});this.view.AccountContainer.segProduct.setData(u),this.view.AccountContainer.NoResults.isVisible=!1,this.view.AccountContainer.flxProductRequest.isVisible=a.length<3,this.view.AccountContainer.flxTwoRowProductRequest.isVisible=1===a.length,this.view.AccountContainer.flxOneRowProductRequest.isVisible=2===a.length,this.view.AccountContainer.flxProductSegment.isVisible=!0}this.view.AccountContainer.SectionError.isVisible&&e.length>=0&&(this.view.AccountContainer.flxProductSegment.isVisible=!0,this.view.AccountContainer.SectionError.isVisible=!1,this.errorAccounts=null),this.firstLoadAcc&&(this.firstLoadAcc=!1),this.view.AccountContainer.isLoading(!1),this.view.forceLayout()},clickFavoriteAccount:function(e){if(!t.isCSRMode()){var i=l.getAccountsCache()[e];l.updateFavoriteAccount(i),this.accountsLoaded=l.getAccountsCache()}},showAccountsCardError:function(){0===n.BANK_TYPE.BIE&&(this.view.ConsolidatedPosition.hideAccountsAmount(),this.checkForConsolidatedPositionVisibility()),this.view.AccountContainer.flxProductSegment.isVisible=!1,this.view.AccountContainer.SectionError.setTexts(this.errorAccounts),this.view.AccountContainer.flxProductRequest.isVisible=!1,this.view.AccountContainer.SectionError.isVisible=!0,this.view.AccountContainer.isLoading(!1)},onClickReloadAccounts:e.handleClick(function(){this.view.AccountContainer.isLoading(!0),l.reloadAccountsCard()}),onClickLinkAccounts:e.handleClick(function(){l.navigateToAccountsHome()}),onClickReloadInvestments:e.handleClick(function(){l.reloadInvestments()}),showErrorInvestments:function(){this.view.InvestmentsContainer.flxProductSegment.isVisible=!1,this.view.InvestmentsContainer.flxProductRequest.isVisible=!1,this.view.InvestmentsContainer.flxProductContent.isVisible=!0,this.view.InvestmentsContainer.SectionError.setTexts(this.messageErrorInvestment),this.view.InvestmentsContainer.SectionError.isVisible=!0},showErrorPayments:function(){this.view.PaymentsContainer.SectionError.setTexts(this.errorMessagePayments),this.view.PaymentsContainer.flxProductRequest.isVisible=!1,this.view.PaymentsContainer.flxPayeeSegment.isVisible=!1,this.view.PaymentsContainer.NoResults.isVisible=!1,this.view.PaymentsContainer.SectionError.isVisible=!0},showEmptyPayments:function(){this.emptyPaymentsMessage?this.view.PaymentsContainer.NoResults.setMessages(this.emptyPaymentsMessage):this.view.PaymentsContainer.NoResults.setMessages(kony.i18n.getLocalizedString("i18n.bccl.ServicesPay.NoAssociatedServicesTitle")),this.view.PaymentsContainer.NoResults.configure({imageSize:"medium"}),this.view.PaymentsContainer.flxPayeeSegment.isVisible=!1,this.view.PaymentsContainer.SectionError.isVisible=!1,this.view.PaymentsContainer.flxProductRequest.isVisible=!0,this.view.PaymentsContainer.NoResults.isVisible=!0,this.view.PaymentsContainer.flxTwoRowProductRequest.isVisible=!1,this.view.PaymentsContainer.flxOneRowProductRequest.isVisible=!1,this.view.forceLayout()},fillPayments:function(e){var i=t.getCurrentDevice(),o=function(){return kony.i18n.getLocalizedString("i18n.bccl.Accounts.AccountsLanding.CardsCard.expiryDate")},s=function(){return kony.i18n.getLocalizedString("i18n.bccl.AccountsLanding.PaymentsCard.EmptyMessageDescription1")},r=function(){return kony.i18n.getLocalizedString("i18n.bccl.AccountsLanding.PaymentsCard.EmptyMessageDescription2")},a=function(){return kony.i18n.getLocalizedString("i18n.bccl.ellipsisIcon")},c={common:function(e){return{imageIcon:{},lblPaymentAmount:{text:e.vencimientos.length?t.formatCurrencyWithPoints(e.vencimientos[0].monto,n.CURRENCY.ARS):kony.i18n.getLocalizedString("i18n.bccl.ServicesPay.AmountToSpecify"),width:"100%",contentAlignment:constants.CONTENT_ALIGN_MIDDLE_RIGHT},flxSubMenuContainer:{isVisible:!t.isCSRMode()},lblSubMenuIcon:{text:a()},lblDetailPago:{text:e.vencimientos.length?e.identificador:""}}},large:function(e){return{template:"flxSecPaymentsDashboardRow",lblServiceName:e.servicio,lblNamePago:e.etiqueta,lblFechaVencimiento:e.vencimientos.length?o()+" "+h.formatDateStringToBars(e.vencimientos[0].fechaVencimiento.split("-").join("")):"",lblServiceName:{text:e.servicio,top:e.vencimientos.length?"8dp":"14dp"}}},medium:function(e){return{template:"flxSecPaymentsDashboardRowSmall",lblServiceName:e.servicio,lblNamePago:e.etiqueta,lblFechaVencimiento:e.vencimientos.length?o()+" "+h.formatToDayAndMonth(e.vencimientos[0].fechaVencimiento.split("-").join("")):"",lblServiceName:{text:e.servicio}}},small:function(e){return{template:"flxSecPaymentsDashboardRowSmall",lblServiceName:e.servicio,lblNamePago:e.etiqueta,lblFechaVencimiento:e.vencimientos.length?o()+" "+h.formatToDayAndMonth(e.vencimientos[0].fechaVencimiento.split("-").join("")):"",lblServiceName:{text:e.servicio}}},getWidgets:function(e,t){return Object.assign(this.common(e),this[t](e))}};if(e.length){var l,d=e.filter(this.enabledServices);if(d.length){l=i;var u=d.slice(0,3),C=[],m=u.map(function(e){e.etiqueta||(e.etiqueta="");var t=c.getWidgets(e,l),i={codigoEnte:e.codigoEnte,codigoRubro:e.codigoRubro};return C.push(i),t});this.view.PaymentsContainer.setData(m,C,u),this.view.PaymentsContainer.flxPayeeContent.isVisible=!0,this.view.PaymentsContainer.flxPayeeSegment.isVisible=!0,this.view.PaymentsContainer.NoResults.isVisible=!1,this.view.PaymentsContainer.SectionError.isVisible=!1,this.view.PaymentsContainer.sgmPayee.isVisible=!0,this.view.PaymentsContainer.flxProductRequest.isVisible=!(u.length>=3),this.view.PaymentsContainer.flxTwoRowProductRequest.isVisible=1===u.length,this.view.PaymentsContainer.flxOneRowProductRequest.isVisible=2===u.length,this.view.PaymentsContainer.lblRequestInfoMessage2.text=i===n.DEVICE_INFO.SCREEN_SIZE.LARGE?s():r()}else this.showEmptyPayments()}this.view.forceLayout()},fillInvestments:function(e){var i=function(){return kony.i18n.getLocalizedString("i18n.bccl.Accounts.AccountsLanding.CardsCard.expiryDate")},o=function(){return kony.i18n.getLocalizedString("i18n.bccl.Dashboard.Investments.TitlePlazoFijo")},s=function(){return kony.i18n.getLocalizedString("i18n.bccl.Dashboard.Investments.TitleFCI")},r=function(){return kony.i18n.getLocalizedString("i18n.bccl.Dashboard.Investments.TitleTitulos")},a=function(){return kony.i18n.getLocalizedString("i18n.bccl.Dashboard.Investments.TitleAcciones")},c=function(){return kony.i18n.getLocalizedString("i18n.bccl.ellipsisIcon")},l=function(){return kony.i18n.getLocalizedString("i18n.bccl.Dashboard.Investments.ProductTextTitle")},d=function(){return kony.i18n.getLocalizedString("i18n.bccl.Dashboard.Investments.ProductTextTitleWithPoint")},u=t.getCurrentDevice(),C={common:function(e){var l=e.descripcion?e.descripcion.substr(0,4):bccl.i18n.LONG_HYPHEN(),d=e.descripcion?e.descripcion.substr(0,5):bccl.i18n.LONG_HYPHEN();return{template:"flxSegHomeInvestmentsLarge",lblTituloPlazoFijo:e.nombre?o():e.tipo?s():"AY24"==l?r():"LEYES"==d?a():"",lblDescriptionPlazoFijo:{text:e.nombre?e.nombre:e.tipo?e.tipo:"AY24"==l?l:"LEYES"==d?d:e.descripcion,top:e.nombre||e.tipo||"AY24"==l||"LEYES"==d?"4dp":"24dp"},lblAmountPlazoFijo:{text:"PF"===e.tipoInversion?this.formatFixedTermAmount(e):t.formatCurrencyWithPoints(e.montoDepositado,e.moneda||n.CURRENCY.ARS),top:e.nombre?"24dp":"4dp"},lblVencePlazoFijo:{text:e.fechaVencimiento?u===n.DEVICE_INFO.SCREEN_SIZE.SMALL?i()+h.formatToDayAndMonth(e.fechaVencimiento):i()+h.formatDateStringToBars(e.fechaVencimiento):"",visible:!!e.nombre},lblTextSaldoEstimado:{text:"Saldo estimado",visible:!e.nombre},lblSubMenuIcon:{isVisible:"PF"===e.tipoInversion,text:c()},flxContainerLeft:{skin:"PF"===e.tipoInversion?"sknFlxCursorPointer":"slFbox"},flxContainerRight:{skin:"PF"===e.tipoInversion?"sknFlxCursorPointer":"slFbox"}}},small:function(e,t){var i=e.descripcion?e.descripcion.substr(0,4):bccl.i18n.LONG_HYPHEN(),n=e.descripcion?e.descripcion.substr(0,5):bccl.i18n.LONG_HYPHEN();return{lblTipoPlazoFijo:e.descripcion?t.setPointsInTipo(i,n,35,e.descripcion):bccl.i18n.LONG_HYPHEN()}},medium:function(e,t){var i=e.descripcion?e.descripcion.substr(0,4):bccl.i18n.LONG_HYPHEN(),n=e.descripcion?e.descripcion.substr(0,5):bccl.i18n.LONG_HYPHEN();return{lblTipoPlazoFijo:e.descripcion?t.setPointsInTipo(i,n,20,e.descripcion):bccl.i18n.LONG_HYPHEN()}},large:function(e,t){var i=e.descripcion?e.descripcion.substr(0,4):bccl.i18n.LONG_HYPHEN(),n=e.descripcion?e.descripcion.substr(0,5):bccl.i18n.LONG_HYPHEN();return{lblTipoPlazoFijo:e.descripcion?t.setPointsInTipo(i,n,40,e.descripcion):bccl.i18n.LONG_HYPHEN()}},getWidgets:function(e,t,i){return Object.assign(this.common(e),this[t](e,i))},formatFixedTermAmount:function(e){return(e.montoDepositado?t.formatCurrencyWithPoints(e.montoDepositado,e.moneda||n.CURRENCY.ARS):"")+" "+(e.montoNetoAReembolsarDesc?e.montoNetoAReembolsarDesc:"")}};if(this.errorInvestments=null,0==e.length)this.view.InvestmentsContainer.flxProductSegment.isVisible=!1,this.view.InvestmentsContainer.flxOneRowProductRequest.isVisible=!1,this.view.InvestmentsContainer.flxTwoRowProductRequest.isVisible=!1,this.view.InvestmentsContainer.NoResults.setMessages(this.messageEmptyInvestments),this.view.InvestmentsContainer.SectionError.isVisible=!1,this.view.InvestmentsContainer.NoResults.configure({imageSize:"medium"}),this.view.InvestmentsContainer.NoResults.isVisible=!0,this.view.InvestmentsContainer.flxProductRequest.isVisible=!0;else{var m=e.slice(0,3);this.investmentsDashboard=m;var g=u,v=this,f=m.map(function(e){var t=C.getWidgets(e,g,v);return"PF"==e.tipoInversion&&(t.onClickFixedTerm=v.onClickFixedTerm),t});this.view.InvestmentsContainer.segProduct.setData(f),this.view.InvestmentsContainer.flxProductSegment.isVisible=!0,this.view.InvestmentsContainer.flxProductRequest.isVisible=!0,this.view.InvestmentsContainer.SectionError.isVisible=!1,this.view.InvestmentsContainer.NoResults.isVisible=!1,this.view.InvestmentsContainer.flxTwoRowProductRequest.isVisible=1===m.length,this.view.InvestmentsContainer.flxOneRowProductRequest.isVisible=2===m.length,this.view.InvestmentsContainer.flxProductRequest.isVisible=!(m.length>=3),this.view.InvestmentsContainer.lblRequestInfoTitle2.text=u===n.DEVICE_INFO.SCREEN_SIZE.LARGE?l():d()}this.view.forceLayout()},onClickFixedTerm:function(e){kony.olb.utils.showProgressBar(),c.getPlazosFijosBccl(this.fixedTermSuccessCallback.bind(this,e),this.fixedTermErrorCallback.bind(this))},fixedTermSuccessCallback:function(e,i,n){kony.olb.utils.hideProgressBar(),n?t.showError(n.errorDescription):this.openFixedTermPanel(e,i)},fixedTermErrorCallback:function(e){kony.olb.utils.hideProgressBar(),t.showError(e.errorMessage.errorDescription)},openFixedTermPanel:function(e,t){for(i=0;i<t.length;i++)t[i].id===this.investmentsDashboard[e].id&&(this.fixedTermDashboard=t[i]);this.view.DetallePlazoFijo.togglePanel(this.fixedTermDashboard),this.view.forceLayout()},setPointsInTipo:function(e,t,i,n){return"AY24"==e?n.substr(5):"LEYES"==t?n.substr(6):n},modifyAdheredService:function(e,t){kony.olb.utils.showProgressBar(),this.view.Panel.toggle("ServicesPay",{}),this.view.Panel.flxBodyContainer.ServicesPay.onEditServiceClick(e,!1,t,!0)},fillCardsCard:function(e,i){var o=function(){return kony.i18n.getLocalizedString("i18n.bccl.FontAwesome.dotsSubMenu")},s=function(){return kony.i18n.getLocalizedString("i18n.bccl.common.separator")},r=function(){return kony.i18n.getLocalizedString("i18n.bccl.Accounts.AccountsLanding.CardsCard.closeDate")},a=function(){return kony.i18n.getLocalizedString("i18n.bccl.Accounts.AccountsLanding.CardsCard.expiryDate")},c=t.getCurrentDevice(),l={common:function(e){return{template:"flxCreditCardDashboardRow",imgCardBrand:{},lblCardNumber:e.cardNumber,lblCardAmountPeso:{text:t.formatCurrencyWithPoints(e.consumoPesos,n.CURRENCY.ARS),skin:e.consumoPesos<0?"sknLblAccountAmountDashboardNegative":"sknLblAccountAmountDashboard"},lblCardAmountDolar:{text:t.formatCurrencyWithPoints(e.consumoDolares,n.CURRENCY.USD),skin:e.consumoDolares<0?"sknLblAccountAmountDashboardNegative":"sknLblAccountAmountDashboard"},lblSeparetor:{text:s()},lblCardDates:{text:c!==n.DEVICE_INFO.SCREEN_SIZE.SMALL?r()+h.formatDateStringToBars(e.fechaCierre)+" - "+a()+h.formatDateStringToBars(e.expiryDate):r()+h.formatToDayAndMonth(e.fechaCierre)+" - "+a()+h.formatToDayAndMonth(e.expiryDate)},lblSubMenuIcon:o()}},getWidgets:function(e){return this.common(e)}},d=e.filter(function(e){return e.estado==n.CREDIT_CARD_STATUS.ACTIVE});if(0==d.length)this.view.CreditCardContainer.flxProductSegment.isVisible=!1,this.view.CreditCardContainer.lblProductDate.isVisible=!1,0===n.BANK_TYPE.BIE&&this.view.ConsolidatedPosition.hideCardsAmount(),this.view.CreditCardContainer.flxOneRowProductRequest.isVisible=!1,this.view.CreditCardContainer.flxTwoRowProductRequest.isVisible=!1,this.view.CreditCardContainer.flxProductRequest.isVisible=!0,this.view.CreditCardContainer.NoResults.configure({imageSize:"medium"}),this.view.CreditCardContainer.NoResults.isVisible=!0,this.view.CreditCardContainer.NoResults.setMessages(this.cardCardsMessage);else{var u=d.slice(0,3),C=this;if(d.length>=2){var m=d.reduce(function(e,t){return e.totalPesos+=parseFloat(t.consumoPesos),e.totalDolares+=parseFloat(t.consumoDolares),e},{totalPesos:0,totalDolares:0});0===n.BANK_TYPE.BIE&&(this.view.ConsolidatedPosition.setCardsAmount(m.totalPesos,m.totalDolares),this.view.ConsolidatedPosition.showCardsAmount())}else 0===n.BANK_TYPE.BIE&&this.view.ConsolidatedPosition.hideCardsAmount();var g=[],v=u.map(function(e){var t=l.getWidgets(e);t.onClickCard=C.onClickCard;var i={cardProductName:e.cardProductName};return g.push(i),t});this.view.CreditCardContainer.setData(v,g),this.fechaConsumos?(this.view.CreditCardContainer.lblProductDate.text=kony.i18n.getLocalizedString("i18n.bccl.AccountsLanding.consumptionTo")+this.fechaConsumos,this.view.CreditCardContainer.lblProductDate.isVisible=!0):this.view.CreditCardContainer.lblProductDate.isVisible=!1,this.view.CreditCardContainer.NoResults.isVisible=!1,this.view.CreditCardContainer.flxProductRequest.isVisible=u.length<3,this.view.CreditCardContainer.flxTwoRowProductRequest.isVisible=1===u.length,this.view.CreditCardContainer.flxOneRowProductRequest.isVisible=2===u.length,this.view.CreditCardContainer.flxProductSegment.isVisible=!0,this.view.CreditCardContainer.flxLinkContainer.isVisible=!0}this.view.CreditCardContainer.SectionError.isVisible&&(e.length&&(this.view.CreditCardContainer.flxProductSegment.isVisible=!0),this.view.CreditCardContainer.SectionError.isVisible=!1,this.errorCards=null),0===n.BANK_TYPE.BIE&&(c!==n.DEVICE_INFO.SCREEN_SIZE.SMALL?this.checkForConsolidatedPositionVisibility():this.view.ConsolidatedPosition.isVisible=!1),this.firstLoad&&(this.firstLoad=!1),this.view.forceLayout()},onClickCard:function(e){var t=d.getCardsCache().filter(function(e){return e.estado==n.CREDIT_CARD_STATUS.ACTIVE})[e];t.cardType.toLowerCase().substr(0,6)==n.CARD_BRAND.MA?d.showMasterCardDetails(t):d.navigateToCardDetails(t)},showCardsCardError:function(){0===n.BANK_TYPE.BIE&&(this.view.ConsolidatedPosition.hideCardsAmount(),this.checkForConsolidatedPositionVisibility()),this.view.CreditCardContainer.flxProductRequest.isVisible=!1,this.view.CreditCardContainer.flxProductSegment.isVisible=!1,this.view.CreditCardContainer.SectionError.setTexts(this.errorCards),this.view.CreditCardContainer.SectionError.isVisible=!0},onClickReloadCards:e.handleClick(function(){d.reloadCreditCardDashboard()}),onClickLinkCards:e.handleClick(function(){d.navigateToCardsHome()}),onBack:function(){var e=this.view.DetallePlazoFijo,t=this.view.PanelBillPay,i=this.view.DetallePlazoFijo.ConfirmPopupEditNameFixedTerm,n=this.view.ConfirmPopup;if(i.isVisible)i.dismiss();else if(n.isVisible)n.dismiss();else if(t.isVisible)switch(t.getWizard().getCurrentStep()){case 1:t.SecondFactor.ButtonConfirm.isLoading()||t.onCancelSecondFactor();break;default:t.togglePanel()}else e.isVisible?e.togglePanel():this.view.modal.isVisible?this.hideModal():this.view.Panel.isVisible?this.view.Panel.toggle():this.view.Modalx.isVisible?this.view.Modalx.show(!1):applicationManager.getNavigationManager().navigateBack()},goToFrmInvestmentsHome:e.handleClick(function(){c.navigateToInvestmentsHome()}),checkForConsolidatedPositionVisibility:function(){var e=t.getCurrentDevice();null!==this.errorAccounts&&null!==this.errorCards||this.accountsLoaded.length<2&&this.cardsLoaded.length<2?this.view.ConsolidatedPosition.isVisible=!1:(this.accountsLoaded.length>=2||this.cardsLoaded.length>=2)&&e!==n.DEVICE_INFO.SCREEN_SIZE.SMALL&&(this.view.ConsolidatedPosition.isVisible=!0),this.uncollapseConsolidatedPosition&&(this.view.ConsolidatedPosition.resetCardCollapse(),this.uncollapseConsolidatedPosition=!1),this.view.forceLayout()},setContainersWidth:function(){this.view.AccountContainer.width="100%",this.view.CreditCardContainer.width="100%",this.view.CreditCardContainer.left="0dp",this.view.InvestmentsContainer.width="100%",this.view.PaymentsContainer.width="100%",this.view.PaymentsContainer.left="0dp"},onClickBuyDollars:function(e){this.selectedIndex=e,c.getCotizacionesBccl(this.successQuotationsCallback.bind(this),this.errorQuotationsCallback.bind(this))},successQuotationsCallback:function(e,i){e.length?(this.accounts=l.getAccountsCache(),this.filterCurrencyAccounts()):t.showError(i.errorDescription)},errorQuotationsCallback:function(e){t.showError(e.errorMessage.errorDescription)},filterCurrencyAccounts:function(){this.selectedAccount=this.accounts[this.selectedIndex],this.accountsPesos=this.accounts.filter(function(e){return e.currencyCode===n.CURRENCY_CODE_INVERTED.$}),this.accountsDolar=this.accounts.filter(function(e){return e.currencyCode===n.CURRENCY_CODE_INVERTED.U$S}),this.validateDolarAccounts()},validateDolarAccounts:function(){if(this.accountsDolar.length){if(this.selectedAccount.currencyCode===n.CURRENCY_CODE_INVERTED.$){this.typeOperation=n.FOREIGN_CURRENCY.OPERATION_TYPE.COMPRA;var e=this.accountsPesos.indexOf(this.selectedAccount),i=this.accountsPesos[0];this.accountsPesos[0]=this.selectedAccount,this.accountsPesos[e]=i}else{this.typeOperation=n.FOREIGN_CURRENCY.OPERATION_TYPE.VENTA;e=this.accountsDolar.indexOf(this.selectedAccount);var o=this.accountsDolar[0];this.accountsDolar[0]=this.selectedAccount,this.accountsDolar[e]=o}r.getSecondFactor()}else t.showError(C())},reloadPayments:e.handleClick(function(){u.reloadPayment()}),goToPayeeHome:e.handleClick(function(){kony.mvc.MDAApplication.getSharedInstance().getModuleManager().getModule("BillPayModule").presentationController.navigateToServicesPay()}),showToastSuccessFavorite:function(e){o.show({type:o.types.SUCCESS,message:e}),this.view.forceLayout()},showToastErrorFavourite:function(e){o.show({type:o.types.ERROR,message:e}),this.view.forceLayout()},enabledServices:function(e){return 1==e.habilitado},onClickAccount:function(e){var t=l.getAccountsCache()[e];l.navigateToAccountsDetails(t)},showAccountDetailsPanel:function(e){var i={titular:e.titular,cbu:t.addHypenInCbuString(e.cbu),cuit:t.addHypensInCuitString(e.cuit),alias:e.alias,accountNumber:e.accountNumber};kony.olb.utils.hideProgressBar(),this.view.Panel.toggle("AccountDetails",i),this.view.forceLayout()},getAlias:function(){this.view.Panel.flxBodyContainer.AccountDetails.ButtonSecondaryWithLoader.isLoading(!0),l.getAlias()},loadImages:function(e){this.view.PaymentsContainer.loadImages(e),this.view.CreditCardContainer.loadImages(e),this.view.PanelBillPay.loadImages(e),this.images=e,this.loadBanner()},loadBanner:function(){var e=this.images,i=e&&t.getCurrentDevice()===n.DEVICE_INFO.SCREEN_SIZE.LARGE;if(i){var o=s.get(e,"DASHBOARD","BANNER_DASHBOARD_TOP");(i=!!o)&&(this.view.imgBannerTop.base64=applicationManager.getImagesManager().deleteDataImage(o))}this.view.imgBannerTop.setVisibility(!!i),this.showBanner=i},hideModal:function(){this.view.modal.show(!1)},setLimitsAvailable:function(e){this.limitsAvailable=e},getLimitsAvailable:function(){return this.limitsAvailable},showSecondFactorNotification:function(){var e=this,i=t.getTutorialSegundoFactorUrl(),o=i?"<br>":"",s={compId:"SecondFactorNotification",richTextType:i?this.view.SecondFactorNotification.types.TEXT_AND_BUTTON:this.view.SecondFactorNotification.types.ONLY_TEXT,text:kony.i18n.getLocalizedString("i18n.bccl.SecondFactorNotification.rtxNotificationMessage")+o,notificationType:this.view.SecondFactorNotification.status.WARNING,rtxSkin:"sknRtxLatoReg1433",buttonSkin:"sknBtnLatoReg143047FB",onClickClose:function(){e.view.flxSecondFactorNotificationContainer.isVisible=!1,e.view.forceLayout()},buttonCallback:i?function(){t.getCurrentChannel()===n.CHANNEL.APP?cordova.InAppBrowser.open(i,"_blank","location=yes"):window.open(i)}.bind(this):null,buttonText:i?kony.i18n.getLocalizedString("i18n.bccl.SecondFactorNotification.btnClickButton"):null};this.view.SecondFactorNotification.config(s),this.view.flxSecondFactorNotificationContainer.isVisible=!0,this.view.forceLayout()},pushStackNotification:function(e){this.popStackNotification(e.id),this.view.flxNotificationsStack.add(e),this.view.flxNotificationsStack.isVisible=!0,this.view.forceLayout()},popStackNotification:function(e){this.view[e]&&(this.view[e].removeFromParent(),this.view.forceLayout())},getSettingsMODOInstance:function(){return this.view.Panel.flxBodyContainer.SettingsMODO},preparePanelSettingsMODO:function(e,t){this.getSettingsMODOInstance().configure({panel:this.view.Panel}),this.getSettingsMODOInstance().resumeValidate(e,t,this.showMODOSettingsPanel.bind(this))},showMODOSettingsPanel:function(){this.view.Panel.toggle("SettingsMODO"),this.view.forceLayout()},onClickButtonColiving:function(i){t.showModal({buttonsLayout:kony.flex.FLOW_HORIZONTAL,withoutIcon:!0,showCloseIcon:!0,code:n.MODAL.CODES.COLIVING,actions:{accept:{text:bccl.i18n.YES(),callback:e.handleClick(function(){t.showModal(!1),bccl.coliving.open(i)})},cancel:{text:bccl.i18n.NO()}}})}}}),define("AccountsModule/frmAccountsLandingControllerActions",{AS_FlexContainer_i13e658498de4f48b3887160b44d985c:function(e){this.onClickLinkAccounts()},AS_FlexContainer_a6ad0a872c354692bca6f20687d716ec:function(e){this.onClickLinkCards()},AS_FlexContainer_fc1ce9e119b843598e0f5c6d112dd999:function(e){this.goToFrmInvestmentsHome()},AS_FlexContainer_e5a8526f8c07490da4437413bf2a95b6:function(e){this.goToPayeeHome()},AS_Form_e0cecb4fa6fa414da4a7eefd732fd884:function(e,t){this.onBreakpointChange(t)},AS_Form_d34f75ed3c4e4069b44c12d6c6550d43:function(e){this.initActions()},AS_Form_e7eedb1b544c4428bdd6df093769eb55:function(e){this.onBack()},AS_Form_debd6d79386b4b94b2e1f527a6b35c25:function(e){this.postShow()},AS_Form_f0257ebf68784c548c562b9486d8a886:function(e){this.preShowFrmAccountsLanding()},AS_Button_cd1d5b892c05484aa7a521b7aaf1900b:function(e){this.hideModal()}}),define("AccountsModule/frmAccountsLandingController",["AccountsModule/userfrmAccountsLandingController","AccountsModule/frmAccountsLandingControllerActions"],function(){var e=require("AccountsModule/userfrmAccountsLandingController");return kony.visualizer.mixinControllerActions(e,["AccountsModule/frmAccountsLandingControllerActions"])});